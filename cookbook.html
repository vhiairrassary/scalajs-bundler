<!DOCTYPE html>
<html class="no-js" lang="eng" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookbook</title>
    <link rel="stylesheet" href="theme/css/foundation.min.css">
    <link rel="stylesheet" href="theme/css/app.css">
    
     <link rel="stylesheet" href="theme/highlight.js/styles/github-gist.css">  <link rel="stylesheet" href="theme/css/foundation-icons.custom.css"> 
    
     <link rel="prev" href="reference.html"  title="Reference"  />  <link rel="next" href="community.html"  title="Community"  />  <link rel="start" href="index.html"  title="Introduction"  />  <link rel="toc" href="site-contents.html"  title="Table of Contents"  /> 
  </head>
  <body>
    <div class="expanded row">
      <div class="small-12 medium-12 large-12 columns align-self-top">
        <div class="row">
          
          <header class="large-12 columns align-self-top a_header">
            <div class="row">
              <div class="large-12 columns a_limited top-bar">
                <div class="top-bar-left">
                  <p>scalajs-bundler</p>

                </div>
                <div class="top-bar-right align-right row">
                  
                  
                    <form action="site-search.html" method="get" class="align-right a_search">
                      <input name="q" type="search"  placeholder="Search
" >
                      <button><img alt="&#1F50D;" src="theme/images/search.svg" /></button>
                    </form>
                  
                </div>
              </div>
            </div>
          </header>
          
          <div class="small-12 medium-12 large-12 columns align-self-top a_limited a_main">
            <div class="row">
              
              <main class="columns large-order-2 sections" id="_sections">
                 
  <ul class="menu align-right simple a_navbar a_navbar_top">
    
      
        <li><a href="reference.html"  title="Reference" ><span class="a_foundation_icon"></span>  Previous</a></li>
      
    
      
        <li><a href="community.html"  title="Community" ><span class="a_foundation_icon"></span>  Next</a></li>
      
    
      
        <li><a href="site-contents.html"  title="Table of Contents" ><span class="a_foundation_icon"></span>  Contents</a></li>
      
    
  </ul>
 
                
                <h1 id="cookbook" class="a_section" data-magellan-target="cookbook">Cookbook<a class="a_hlink" href="#cookbook"></a></h1>
<ul>
<li><a href="cookbook.html#cookbook">Cookbook</a>
<ul>
<li><a href="cookbook.html#custom-config">How to use a custom webpack configuration file?</a></li>
<li><a href="cookbook.html#shared-config">Sharing webpack configuration among configuration files</a></li>
<li><a href="cookbook.html#facade">How to use npm modules from Scala code?</a></li>
<li><a href="cookbook.html#publish">How to publish a facade for an npm module?</a></li>
<li><a href="cookbook.html#global-namespace">How to use an existing facade assuming the JS library to be exposed to the global namespace?</a></li>
<li><a href="cookbook.html#several-entry-points">How to bundle an application having several entry points as exports?</a></li>
<li><a href="cookbook.html#performance">How to improve the performance of the bundling process?</a></li>
<li><a href="cookbook.html#how-to-select-specific-files-from-the-bundlingmode.library-output">How to select specific files from the BundlingMode.Library output</a></li>
<li><a href="cookbook.html#webpack-dev-server">How to rebuild and reload your page on code changes?</a></li>
<li><a href="cookbook.html#how-to-pass-extra-parameters-to-webpack">How to pass extra parameters to webpack</a></li>
<li><a href="cookbook.html#how-to-use-webpack-4">How to use webpack 4</a></li>
<li><a href="cookbook.html#how-to-get-and-use-a-list-of-assets">How to get and use a list of assets</a></li>
</ul>
</li>
</ul>
<h2 id="custom-config" class="a_section" data-magellan-target="custom-config">How to use a custom webpack configuration file?<a class="a_hlink" href="#custom-config"></a></h2>
<p>First, configure the <code class="hljs">webpackConfigFile</code> setting to refer to your configuration file:</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">null := <span class="hljs-type">Some</span>(baseDirectory.value / <span class="hljs-string">"my.custom.webpack.config.js"</span>)
</code></pre>
</div></div>
<p>Or, if you want to use the same configuration file for both <code class="hljs">fastOptJS</code> and <code class="hljs">fullOptJS</code>:</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">webpackConfigFile := <span class="hljs-type">Some</span>(baseDirectory.value / <span class="hljs-string">"my.custom.webpack.config.js"</span>)
</code></pre>
</div></div>
<p>Then, you can write your configuration in file <code class="hljs">my.custom.webpack.config.js</code>.
We recommend that you reuse the configuration file generated by scalajs-bundler
and extend it, rather than writing a configuration file from scratch.</p>
<p>You can do so as follows (in file `my.custom.webpack.config.js``):</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-javascript"><span class="hljs-keyword">var</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack'</span>);

<span class="hljs-built_in">module</span>.exports = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./scalajs.webpack.config'</span>);

<span class="hljs-comment">// And then modify `module.exports` to extend the configuration</span>
</code></pre>
</div></div>
<p>The key part is the <code class="hljs">require(&#x27;./scalajs.webpack.config&#x27;)</code>. It loads the configuration
file generated by scalajs-bundler so that you can tweak it. It works because your configuration
file will be copied into the internal target directory, where the scalajs-bundler generates
its configuration file, and where all the npm dependencies have been downloaded (so you can
also <code class="hljs">require</code> these dependencies).</p>
<p>By default <code class="hljs">webpack</code> task only actually launches webpack if it detects changes in
settings or in the custom webpack config file. Depending on your usage scenario, you might
want to monitor some other files as well (for example, if your webpack config references
some additional resources). This can be achieved by using <code class="hljs">webpackMonitoredDirectories</code>
setting:</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">webpackMonitoredDirectories += baseDirectory.value / <span class="hljs-string">"my-scss"</span>
includeFilter in webpackMonitoredFiles := <span class="hljs-string">"*.scss"</span>
</code></pre>
</div></div>
<p>More fine-grained control over the list of monitored files is possible by overriding the
<code class="hljs">webpackMonitoredFiles</code> task.</p>
<p>You can find a working example of custom configuration file
<a href="https://github.com/scalacenter/scalajs-bundler/blob/master/sbt-scalajs-bundler/src/sbt-test/sbt-scalajs-bundler/static/prod.webpack.config.js">here</a>.</p>
<p>It is also possible to configure a webpack config file to be used in reload workflow and when running the tests.
This configuration may not contain <code class="hljs">entry</code> and <code class="hljs">output</code> configuration but can be used to configure loaders etc.</p>
<p>These configuration files are configured using <code class="hljs">webpackConfigFile in reloadTask</code> or <code class="hljs">webpackConfigFile in Test</code>.
For example:</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">webpackConfigFile in webpackReload := <span class="hljs-type">Some</span>(baseDirectory.value / <span class="hljs-string">"common.webpack.config.js"</span>)

webpackConfigFile in <span class="hljs-type">Test</span> := <span class="hljs-type">Some</span>(baseDirectory.value / <span class="hljs-string">"common.webpack.config.js"</span>)
</code></pre>
</div></div>
<h2 id="shared-config" class="a_section" data-magellan-target="shared-config">Sharing webpack configuration among configuration files<a class="a_hlink" href="#shared-config"></a></h2>
<p>In addition to the configured webpack config file, all .js files in the project base directory
(as configured using the <code class="hljs">webpackResources</code> setting) are copied to the target directory so they can be imported
from the various configuration files.</p>
<p>Here are the steps to share the loader configuration among your prod and dev config files. This
uses webpack-merge for convenience. The same result could be accomplished using plain js only.</p>
<ol>
<li>Put configuration in a common.webpack.config.js file:</li>
</ol>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-javascript"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-built_in">module</span>: {
    loaders: [
        ...
    ],
    rules: [
        ...
    ]
  }
}
</code></pre>
</div></div>
<ol start="2">
<li>Add webpack-merge to your <code class="hljs">npmDevDependencies</code>:</li>
</ol>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-bash">npmDevDependencies <span class="hljs-keyword">in</span> Compile += <span class="hljs-string">"webpack-merge"</span> -&gt; <span class="hljs-string">"4.1.0"</span>
</code></pre>
</div></div>
<ol start="3">
<li>Merge in the common configuration in your dev.webpack.js file:</li>
</ol>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-javascript"><span class="hljs-keyword">var</span> merge = <span class="hljs-built_in">require</span>(<span class="hljs-string">"webpack-merge"</span>)
<span class="hljs-keyword">var</span> commonConfig = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./common.webpack.config.js"</span>)

<span class="hljs-built_in">module</span>.exports = merge(commonConfig, {
    ...
})
</code></pre>
</div></div>
<p>You can find a working example of a project using a shared configuration file
<a href="https://github.com/scalacenter/scalajs-bundler/blob/master/sbt-scalajs-bundler/src/sbt-test/sbt-scalajs-bundler/sharedconfig">here</a>.</p>
<h2 id="facade" class="a_section" data-magellan-target="facade">How to use npm modules from Scala code?<a class="a_hlink" href="#facade"></a></h2>
<p>Once you have <a href="getting-started.html">added npm dependencies</a> to the packages you are interested
in, you have to <em>import</em> them from your code to effectively use them.</p>
<p>The recommended way to do that is to:</p>
<ol>
<li>Write a <a href="https://www.scala-js.org/doc/interoperability/facade-types.html">Scala.js</a>
facade annotated with
<a href="https://www.scala-js.org/doc/interoperability/facade-types.html#a-nameimporta-imports-from-other-javascript-modules"><code class="hljs">@JSImport</code></a> ;</li>
<li>Refer to this facade from your code.</li>
</ol>
<p>Let’s illustrate this with an example. Say that you want to write a facade for the following
npm module:</p>
<ul class="tabs" data-tabs id="_id0"><li class="tabs-title is-active"><a href="#_id1" aria-selected="true">foo.js (CommonJS)</a></li><li class="tabs-title"><a href="#_id2">foo.js (ES6)</a></li></ul>
<div class="tabs-content" data-tabs-content="_id0"><div class="tabs-panel is-active" id="_id1">
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-javascript">exports.bar = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">i</span>) </span>{ <span class="hljs-keyword">return</span> i + <span class="hljs-number">1</span> };
</code></pre>
</div></div>
</div><div class="tabs-panel" id="_id2">
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> bar = i =&gt; i + <span class="hljs-number">1</span>;
</code></pre>
</div></div>
</div></div>
<p>The corresponding Scala.js facade looks like the following:</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala"><span class="hljs-keyword">import</span> scala.scalajs.js
<span class="hljs-keyword">import</span> scala.scalajs.js.annotation.<span class="hljs-type">JSImport</span>

<span class="hljs-meta">@JSImport</span>(<span class="hljs-string">"foo"</span>, <span class="hljs-type">JSImport</span>.<span class="hljs-type">Namespace</span>)
<span class="hljs-meta">@js</span>.native
<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">foo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">js</span>.<span class="hljs-title">Object</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bar</span></span>(i: <span class="hljs-type">Int</span>): <span class="hljs-type">Int</span> = js.native
}
</code></pre>
</div></div>
<p>There are several points worth highlighting:</p>
<ul>
<li>The first parameter of the <code class="hljs">@JSImport</code> annotation is the npm module path. This is
the value you would pass to the
<a href="https://nodejs.org/docs/latest/api/modules.html#modules_all_together">Nodejs <code class="hljs">require</code></a>
function ;</li>
<li>The second parameter of <code class="hljs">@JSImport</code> is the name of the imported member, or like in our
case, <code class="hljs">JSImport.Namespace</code>, to import the whole module instead of just one particular
member ;</li>
<li>The facade is concrete. It can either be a Scala <code class="hljs">object</code> or a <code class="hljs">class</code> ;</li>
<li>The facade has a
<a href="https://www.scala-js.org/doc/interoperability/facade-types.html">“JS native” type</a>.</li>
</ul>
<blockquote class="note">
<p>Other styles of facades (importing a member in particular, importing functions and classes,
importing local JavaScript files, etc.) can be found in
<a href="https://github.com/scalacenter/scalajs-bundler/blob/master/sbt-scalajs-bundler/src/sbt-test/sbt-scalajs-bundler/facade-examples">these tests</a>.</p>
</blockquote>
<p>Finally, in your Scala code, just refer to the <code class="hljs">foo</code> object:</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Main</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = {
    println(foo.bar(<span class="hljs-number">42</span>))
  }
}
</code></pre>
</div></div>
<h2 id="publish" class="a_section" data-magellan-target="publish">How to publish a facade for an npm module?<a class="a_hlink" href="#publish"></a></h2>
<p>Create a project for the facade and enable the <code class="hljs">ScalaJSBundlerPlugin</code> as described
<a href="getting-started.html">here</a>.</p>
<p>Implement the facade as explained in the <a href="cookbook.html#facade">above section</a>.</p>
<p>Publish the Scala.js project <a href="http://www.scala-sbt.org/1.0/docs/Publishing.html">as usual</a>.</p>
<p>Finally, to use the facade from another Scala.js project, this one needs both to add a
dependency on the facade and to enable the <code class="hljs">ScalaJSBundlerPlugin</code> plugin.</p>
<blockquote class="warning">
<p>Projects that <strong>use</strong> the facade also have to enable the <code class="hljs">ScalaJSBundlerPlugin</code> plugin,
otherwise the dependencies of the facade will not be resolved.</p>
</blockquote>
<h2 id="global-namespace" class="a_section" data-magellan-target="global-namespace">How to use an existing facade assuming the JS library to be exposed to the global namespace?<a class="a_hlink" href="#global-namespace"></a></h2>
<p>Webpack is able to require external modules by using <a href="https://github.com/webpack-contrib/imports-loader">imports-loader</a>
and expose them to the global namespace by using <a href="https://github.com/webpack/expose-loader">expose-loader</a>.
Thus, you can write a custom webpack configuration file that uses this loaders to expose the required
modules to the global namespace. Typically, this file will look like this:</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-javascript"><span class="hljs-keyword">var</span> globalModules = {
  moment: <span class="hljs-string">"moment"</span>
};

<span class="hljs-keyword">const</span> importRule = {
  <span class="hljs-comment">// Force require global modules</span>
  test: <span class="hljs-regexp">/.*-(fast|full)opt\.js$/</span>,
  loader:
    <span class="hljs-string">"imports-loader?"</span> +
    <span class="hljs-built_in">Object</span>.keys(globalModules)
      .map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">modName</span>) </span>{
        <span class="hljs-keyword">return</span> modName + <span class="hljs-string">"="</span> + globalModules[modName];
      })
      .join(<span class="hljs-string">","</span>)
};

<span class="hljs-keyword">const</span> exposeRules = <span class="hljs-built_in">Object</span>.keys(globalModules).map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">modName</span>) </span>{
  <span class="hljs-comment">// Expose global modules</span>
  <span class="hljs-keyword">return</span> {
    test: <span class="hljs-built_in">require</span>.resolve(modName),
    loader: <span class="hljs-string">"expose-loader?"</span> + globalModules[modName]
  };
});

<span class="hljs-keyword">const</span> allRules = exposeRules.concat(importRule);

<span class="hljs-built_in">module</span>.exports = {
  performance: { hints: <span class="hljs-literal">false</span> },
  <span class="hljs-built_in">module</span>: {
    rules: allRules
  }
};</code></pre>
</div></div>
<p>Also, tweak your <code class="hljs">build.sbt</code> to add the corresponding NPM dependencies and to use the
custom webpack configuration file:</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">npmDependencies in <span class="hljs-type">Compile</span> ++= <span class="hljs-type">Seq</span>(
  <span class="hljs-string">"moment"</span> -&gt; <span class="hljs-string">"2.18.1"</span>
)

npmDevDependencies in <span class="hljs-type">Compile</span> ++= <span class="hljs-type">Seq</span>(
  <span class="hljs-string">"webpack-merge"</span> -&gt; <span class="hljs-string">"4.1.2"</span>,
  <span class="hljs-string">"imports-loader"</span> -&gt; <span class="hljs-string">"0.8.0"</span>,
  <span class="hljs-string">"expose-loader"</span> -&gt; <span class="hljs-string">"0.7.5"</span>
)

webpackConfigFile in fastOptJS := <span class="hljs-type">Some</span>(baseDirectory.value / <span class="hljs-string">"dev.webpack.config.js"</span>)

webpackConfigFile in <span class="hljs-type">Test</span> := <span class="hljs-type">Some</span>(baseDirectory.value / <span class="hljs-string">"test.webpack.config.js"</span>)

<span class="hljs-comment">// Execute the tests in browser-like environment</span>
requireJsDomEnv in <span class="hljs-type">Test</span> := <span class="hljs-literal">true</span></code></pre>
</div></div>
<p>You can find a fully working example
<a href="https://github.com/scalacenter/scalajs-bundler/blob/master/sbt-scalajs-bundler/src/sbt-test/sbt-scalajs-bundler/global-namespace-with-jsdom-unit-testing">here</a>.</p>
<h2 id="several-entry-points" class="a_section" data-magellan-target="several-entry-points">How to bundle an application having several entry points as exports?<a class="a_hlink" href="#several-entry-points"></a></h2>
<p>By default, <code class="hljs">ScalaJSBundlerPlugin</code> assumes that your application only has a main class, activated through
<code class="hljs">scalaJSUseMainModuleInitializer := true</code>, and disregards top-level <em>exports</em>. If you have exports that
need to be exposed as several entry points, this will not work.</p>
<p>In such a case, you can use <code class="hljs">BundlingMode.LibraryAndApplication()</code>.</p>
<p><code class="hljs">build.sbt</code>:</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">webpackBundlingMode := <span class="hljs-type">BundlingMode</span>.<span class="hljs-type">LibraryAndApplication</span>()</code></pre>
</div></div>
<p>Then, assuming that you defined the following library:</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala"><span class="hljs-keyword">package</span> example

<span class="hljs-keyword">import</span> scala.scalajs.js.annotation.{<span class="hljs-type">JSExportTopLevel</span>, <span class="hljs-type">JSExportAll</span>}

<span class="hljs-meta">@JSExportTopLevel</span>(name=<span class="hljs-string">"sjs_example_Library"</span>) <span class="hljs-meta">@JSExportAll</span>
<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Library</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span></span>(): <span class="hljs-type">String</span> = <span class="hljs-type">SomeOtherCode</span>.quux(<span class="hljs-literal">true</span>)
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bar</span></span>(): <span class="hljs-type">String</span> = <span class="hljs-type">SomeOtherCode</span>.quux(<span class="hljs-literal">false</span>)
}</code></pre>
</div></div>
<p>You can call its methods as follows from your JavaScript code:</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">console.log(sjs_example_Library.foo());
console.log(sjs_example_Library.bar());</code></pre>
</div></div>
<h2 id="performance" class="a_section" data-magellan-target="performance">How to improve the performance of the bundling process?<a class="a_hlink" href="#performance"></a></h2>
<p>You can enable the <a href="reference.html#bundling-mode-library-only">library-only bundling mode</a> and disable source maps:</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">webpackBundlingMode := <span class="hljs-type">BundlingMode</span>.<span class="hljs-type">LibraryOnly</span>()
emitSourceMaps := <span class="hljs-literal">false</span>
</code></pre>
</div></div>
<h2 id="how-to-select-specific-files-from-the-bundlingmode.library-output" class="a_section" data-magellan-target="how-to-select-specific-files-from-the-bundlingmode.library-output">How to select specific files from the <code class="hljs">BundlingMode.Library</code> output<a class="a_hlink" href="#how-to-select-specific-files-from-the-bundlingmode.library-output"></a></h2>
<p>In <a href="reference.html#bundling-mode-library-only">library-only bundling mode</a> and
<a href="reference.html#bundling-mode-library-and-application">library with application bundling mode</a>, the <code class="hljs">webpack</code> task
produces multiple files. In order to determine which of these files is, for instance, the
<a href="api/latest/index.html#scalajsbundler.BundlerFileType$$Application$">BundlerFileType.Application</a>, you
can use the <code class="hljs">_.metadata</code> property of the files, like this:</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala"><span class="hljs-keyword">val</span> files = (webpack in (<span class="hljs-type">Compile</span>, fullOptJS)).value
<span class="hljs-keyword">val</span> bundleFile = files
  .find(_.metadata.get(<span class="hljs-type">BundlerFileTypeAttr</span>).exists(_ == <span class="hljs-type">BundlerFileType</span>.<span class="hljs-type">ApplicationBundle</span>))
  .get.data</code></pre>
</div></div>
<h2 id="webpack-dev-server" class="a_section" data-magellan-target="webpack-dev-server">How to rebuild and reload your page on code changes?<a class="a_hlink" href="#webpack-dev-server"></a></h2>
<p><code class="hljs">scalajs-bundler</code> includes a simple wrapper over webpack-dev-server to simplify your
workflow. It is exposed as two stage-level tasks (<code class="hljs">startWebpackDevServer</code> and
<code class="hljs">stopWebpackDevServer</code>).
The standard work session looks like this:</p>
<ol>
<li>Spawn background server process:
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-markdown"><span class="hljs-quote">&gt; fastOptJS::startWebpackDevServer</span>
</code></pre>
</div></div>
By default the server is started on port <code class="hljs">8080</code>. Use <code class="hljs">webpackDevServerPort</code> setting to change this.</li>
<li>Instruct SBT to rebuild on source changes:
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-markdown"><span class="hljs-quote">&gt; ~fastOptJS</span>
</code></pre>
</div></div>
</li>
<li>Now each time you change a source file, Scala.js recompiles it, and webpack-dev-server
switches to the updated version.</li>
<li>Shut down the background process:
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-markdown"><span class="hljs-quote">&gt; fastOptJS::stopWebpackDevServer</span>
</code></pre>
</div></div>
</li>
</ol>
<p>Additional arguments can be passed to webpack-dev-server via <code class="hljs">webpackDevServerExtraArgs</code>
setting. For example, you can add the following to your <code class="hljs">build.sbt</code> to make your page
reload on every change:</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">webpackDevServerExtraArgs := <span class="hljs-type">Seq</span>(<span class="hljs-string">"--inline"</span>)
</code></pre>
</div></div>
<h2 id="how-to-pass-extra-parameters-to-webpack" class="a_section" data-magellan-target="how-to-pass-extra-parameters-to-webpack">How to pass extra parameters to webpack<a class="a_hlink" href="#how-to-pass-extra-parameters-to-webpack"></a></h2>
<p><code class="hljs">scalajs-bundler</code> invokes <code class="hljs">webpack</code> with a configuration generated either automatically from the build or set with <code class="hljs">webpackConfigFile</code>.
<code class="hljs">webpack</code> is then called with the following arguments:</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-sql"><span class="hljs-comment">--bail --config &lt;configfile&gt;</span>
</code></pre>
</div></div>
<p>You can add extra params to the <code class="hljs">webpack</code> call, for example, to increase debugging</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">webpackExtraArgs := <span class="hljs-type">Seq</span>(<span class="hljs-string">"--profile"</span>, <span class="hljs-string">"--progress"</span>, <span class="hljs-string">"true"</span>)
</code></pre>
</div></div>
<p><strong>Note</strong> Params are passed verbatim, they are not sanitized and could produce errors when passed to webpack.
In particular, don't attempt to override the <code class="hljs">--config</code> param.</p>
<h2 id="how-to-use-webpack-4" class="a_section" data-magellan-target="how-to-use-webpack-4">How to use webpack 4<a class="a_hlink" href="#how-to-use-webpack-4"></a></h2>
<p><code class="hljs">scalajs-bundler</code> (version 0.12.0 onwards) supports webpack 4. To enable webpack 4, set the correct versions in <code class="hljs">build.sbt</code></p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala">version in webpack := <span class="hljs-string">"4.8.1"</span>

version in startWebpackDevServer := <span class="hljs-string">"3.1.4"</span>
</code></pre>
</div></div>
<p>Additionally, you need to update any webpack plugins your config uses, to Webpack 4 compatible versions.</p>
<p>Webpack 4 has the potential to substantially reduce your webpack compilation times (80% reductions have been observed but your mileage may vary)</p>
<h2 id="how-to-get-and-use-a-list-of-assets" class="a_section" data-magellan-target="how-to-get-and-use-a-list-of-assets">How to get and use a list of assets<a class="a_hlink" href="#how-to-get-and-use-a-list-of-assets"></a></h2>
<p><code class="hljs">scalajs-bundler</code> (version 0.13.0 onwards) will export a list of all assets produced by webpack. You can read that list on sbt</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala"><span class="hljs-keyword">val</span> files = (webpack in (<span class="hljs-type">Compile</span>, fullOptJS)).value
</code></pre>
</div></div>
<p>You can this list e.g. with <a href="https://github.com/sbt/sbt-native-packager">sbt-native-packager</a>` to add mappings as:</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala"><span class="hljs-comment">// Use ScalaJs and the sbt native packager</span>
enablePlugins(<span class="hljs-type">ScalaJSBundlerPlugin</span>, <span class="hljs-type">UniversalPlugin</span>, <span class="hljs-type">UniversalDeployPlugin</span>)

<span class="hljs-comment">// All files shall go directly into the archive rather than having a top level directory matching</span>
<span class="hljs-comment">// the module name</span>
topLevelDirectory := <span class="hljs-type">None</span>

<span class="hljs-comment">// Map all assets produced by the ScalaJs Bundler to their location within the archive</span>
mappings.in(<span class="hljs-type">Universal</span>) ++= webpack.in(<span class="hljs-type">Compile</span>, fullOptJS).value.map { f =&gt;
  f.data -&gt; <span class="hljs-string">s"assets/<span class="hljs-subst">${f.data.getName()}</span>"</span>
}</code></pre>
</div></div>
<p>This will add all artifacts produced by the fully optimized Scala.JS run to the 'assets' directory of the target archive.</p>
<p>If you need to package additional libraries that have been downloaded by <code class="hljs">scalajs-bundler</code>, you can do something like:</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala"><span class="hljs-comment">// Add any other required files to the archive</span>
mappings.in(<span class="hljs-type">Universal</span>) ++= <span class="hljs-type">Seq</span>(
  target.value / (<span class="hljs-string">"scala-"</span> + scalaBinaryVersion.value) / <span class="hljs-string">"scalajs-bundler"</span> / <span class="hljs-string">"main"</span> / <span class="hljs-string">"node_modules"</span> / <span class="hljs-string">"react"</span> / <span class="hljs-string">"umd"</span> / <span class="hljs-string">"react.production.min.js"</span> -&gt; <span class="hljs-string">"assets/react.production.min.js"</span>,
  target.value / (<span class="hljs-string">"scala-"</span> + scalaBinaryVersion.value) / <span class="hljs-string">"scalajs-bundler"</span> / <span class="hljs-string">"main"</span> / <span class="hljs-string">"node_modules"</span> / <span class="hljs-string">"react-dom"</span> / <span class="hljs-string">"umd"</span> / <span class="hljs-string">"react-dom.production.min.js"</span> -&gt; <span class="hljs-string">"assets/react-dom.production.min.js"</span>
)</code></pre>
</div></div>
<p>Also, any static resources that you would like to have in the resulting archive (i.e. <code class="hljs">index.html</code>), should live inside the <code class="hljs">src/universal</code> directory of your project.</p>

                 
  <ul class="menu align-right simple a_navbar a_navbar_bottom">
    
      
        <li><a href="reference.html"  title="Reference" ><span class="a_foundation_icon"></span>  Previous</a></li>
      
    
      
        <li><a href="community.html"  title="Community" ><span class="a_foundation_icon"></span>  Next</a></li>
      
    
      
        <li><a href="site-contents.html"  title="Table of Contents" ><span class="a_foundation_icon"></span>  Contents</a></li>
      
    
  </ul>
 
              </main>
              
              
                <div data-sticky-container class="small-12 medium-12 large-2 large-order-1 columns a_sitenav_container">
                  <nav class="a_sitenav" data-sticky data-sticky-on="large" data-anchor="_sections">
                    
                    <ul>
                       
  <li >
    
      
        <a href="index.html">Introduction</a>
      
    
    
  </li>
  
  <li >
    
      
        <a href="motivation.html">Motivation</a>
      
    
    
  </li>
  
  <li >
    
      
        <a href="getting-started.html">Getting started</a>
      
    
    
  </li>
  
  <li >
    
      
        <a href="reference.html">Reference</a>
      
    
    
  </li>
  
  <li  class="a_thispage" >
    
      
        <a href="cookbook.html">Cookbook</a>
      
    
    
  </li>
  
  <li >
    
      
        <a href="community.html">Community</a>
      
    
    
  </li>
  
  <li >
    
      
        <a href="changelog.html">Changelog</a>
      
    
    
  </li>
 
                    </ul>
                    
                    
                  </nav>
                </div>
              
              
              
                <div class="small-12 medium-12 large-2 large-order-3 columns a_show-for-xlarge" data-sticky-container>
                  <nav class="a_pagenav" data-sticky data-sticky-on="large" data-anchor="_sections">
                     <header><p>On This Page</p>
</header> 
                    <ul class="vertical menu" data-magellan>
                       
  
    <li>
      
         <a href="#cookbook">Cookbook</a> 
      
      
        <ul class="vertical menu">  
  
    <li>
      
         <a href="#custom-config">How to use a custom webpack configuration file?</a> 
      
      
    </li>
  
  
  
    <li>
      
         <a href="#shared-config">Sharing webpack configuration among configuration files</a> 
      
      
    </li>
  
  
  
    <li>
      
         <a href="#facade">How to use npm modules from Scala code?</a> 
      
      
    </li>
  
  
  
    <li>
      
         <a href="#publish">How to publish a facade for an npm module?</a> 
      
      
    </li>
  
  
  
    <li>
      
         <a href="#global-namespace">How to use an existing facade assuming the JS library to be exposed to the global namespace?</a> 
      
      
    </li>
  
  
  
    <li>
      
         <a href="#several-entry-points">How to bundle an application having several entry points as exports?</a> 
      
      
    </li>
  
  
  
    <li>
      
         <a href="#performance">How to improve the performance of the bundling process?</a> 
      
      
    </li>
  
  
  
    <li>
      
         <a href="#how-to-select-specific-files-from-the-bundlingmode.library-output">How to select specific files from the BundlingMode.Library output</a> 
      
      
    </li>
  
  
  
    <li>
      
         <a href="#webpack-dev-server">How to rebuild and reload your page on code changes?</a> 
      
      
    </li>
  
  
  
    <li>
      
         <a href="#how-to-pass-extra-parameters-to-webpack">How to pass extra parameters to webpack</a> 
      
      
    </li>
  
  
  
    <li>
      
         <a href="#how-to-use-webpack-4">How to use webpack 4</a> 
      
      
    </li>
  
  
  
    <li>
      
         <a href="#how-to-get-and-use-a-list-of-assets">How to get and use a list of assets</a> 
      
      
    </li>
  
  </ul>
      
    </li>
  
 
                    </ul>
                  </nav>
                </div>
              
            </div>
          </div>
        </div>
      </div>
      
      <footer class="small-12 medium-12 large-12 columns align-self-bottom a_footer">
        <div class="row">
          <div class="small-12 medium-12 large-12 columns top-bar">
            <div class="top-bar-left">
              
            </div>
            <div class="top-bar-right">
              <p>Generated with <a href="https://github.com/szeiger/ornate">Ornate</a>.</p>

            </div>
          </div>
        </div>
      </footer>
    </div>
    
    <script src="theme/js/jquery.min.js"></script>
    <script src="theme/js/what-input.min.js"></script>
    <script src="theme/js/foundation.min.js"></script>
    
    <script src="theme/js/app.js"></script>
    
  </body>
</html>
